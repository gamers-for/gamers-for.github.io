# Gamers-For プロジェクト方針書

**最終更新**: 2026-02-12
**ステータス**: テンプレート化移行中

---

## 1. プロジェクト概要

**目的**: Claude Code（自律AI）を使い、Game8・GameWithレベルのゲーム攻略サイトを量産して収益化する
**技術**: Hugo v0.139.0 extended + カスタムレイアウト + GitHub Pages
**戦略**: 1ゲーム完成 → テンプレート化 → 品質チェック自動化 → 横展開で大量生産
**設計思想**: 人間が見なくても品質が担保される仕組みを作る

---

## 2. ディレクトリ構成

```
project_blog/
│
├── 方針.md                              # ← 本ファイル（プロジェクト全体の方針）
│
├── gamers-for/                          # Hugoサイト本体（デプロイ対象）
│   ├── hugo.toml
│   ├── content/games/<game-slug>/       # 各ゲームのコンテンツ
│   ├── layouts/                         # Hugo レイアウト・ショートコード
│   ├── static/css/style.css             # サイト共通CSS
│   ├── static/images/games/             # ゲーム別画像
│   └── data/                            # マスターJSON等
│
├── ００テンプレート/                       # ゲーム共通のテンプレート・ツール群
│   ├── README.md                        # テンプレートの使い方
│   ├── hugo_template/                   # Hugo共通レイアウト・CSS・ショートコード
│   │   ├── layouts/                     # 共通レイアウトテンプレート
│   │   ├── shortcodes/                  # 共通ショートコード
│   │   └── css/                         # 共通CSSテンプレート
│   ├── scripts/                         # 共通スクリプト群
│   │   ├── build_master_data.py         # raw_data → master JSON（汎用）
│   │   ├── generate_pages.py            # master JSON → Hugoページ（汎用）
│   │   ├── fetch_icons.py               # アイコン取得（汎用）
│   │   ├── qa_stage1.py                 # 第1段階: Playwright機械的チェック
│   │   ├── qa_stage2.py                 # 第2段階: Claude API画像評価
│   │   └── qa_text.py                   # 文章品質チェック
│   └── game_config_template.json        # ゲーム設定テンプレート（雛形）
│
├── ０１スプラトゥーン３/                    # スプラ3固有のデータ・設定
│   ├── README.md                        # スプラ3固有の説明
│   ├── raw_data/                        # スクレイピング生データ（5ファイル、3,166行）
│   │   ├── game8_weapons.md
│   │   ├── gamewith_weapons.md
│   │   ├── game8_stages_modes.md
│   │   ├── battle_rules_guides.md
│   │   └── additional_data.md
│   ├── game_config.json                 # スプラ3固有設定（武器種、ティア定義等）
│   └── custom/                          # スプラ3固有のカスタマイズ（ショートコード等）
│
├── ０２原神/（将来）
├── ０３ブルーアーカイブ/（将来）
└── ...
```

### 設計思想

| 原則 | 説明 |
|------|------|
| **分離** | Hugoサイト本体（`gamers-for/`）とデータ・ツール（`００テンプレート/`, `０１〜/`）を分離 |
| **再利用** | ゲーム共通のロジックは`００テンプレート/`に集約。ゲーム固有は`０N〜/`に |
| **自動化** | raw_data → master JSON → Hugo pages → build → QA の全工程をスクリプト化 |
| **品質担保** | 2段階品質チェック + 文章チェックで人間レビュー不要 |

---

## 3. 2段階品質チェックシステム（核心）

### なぜ2段階か

前回の反省: `evaluate_site.py` の自己評価で100点が出たが、実際にブラウザで見るとGame8には程遠かった。
**テキストベースのチェック（HTMLソース解析）だけでは「見た目」の品質を測れない。**

→ 解決策: **機械的チェック（速い・毎回）+ 視覚的チェック（遅い・変更時）の2段階**

```
┌─────────────────────────────────────────────────────┐
│                  品質チェックフロー                      │
│                                                       │
│  コード変更                                            │
│      ↓                                               │
│  Hugo build                                          │
│      ↓                                               │
│  ┌──────────────────────┐                             │
│  │ 第1段階: 機械的チェック │  ← 毎回実行（10秒）          │
│  │ (Playwright)          │                            │
│  └──────────┬───────────┘                             │
│             │ PASS                                    │
│             ↓                                         │
│  ┌──────────────────────┐                             │
│  │ 文章チェック           │  ← 毎回実行（30秒）          │
│  │ (Claude API)          │                            │
│  └──────────┬───────────┘                             │
│             │ PASS                                    │
│             ↓                                         │
│  ┌──────────────────────┐                             │
│  │ 第2段階: 画像評価      │  ← テンプレ変更時のみ（2分）   │
│  │ (Claude API + SS)     │                            │
│  └──────────┬───────────┘                             │
│             │ PASS                                    │
│             ↓                                         │
│          デプロイ                                       │
└─────────────────────────────────────────────────────┘
```

---

### 第1段階: Playwright機械的チェック（`qa_stage1.py`）

**実行タイミング**: 毎回（Hugo build後に必ず）
**所要時間**: 約10秒
**ツール**: Playwright（ヘッドレスブラウザ）

#### チェック項目（10項目・全ページ対象）

| # | チェック項目 | 判定基準 | 失敗時の自動修正 |
|---|------------|---------|----------------|
| 1 | **リンク切れ** | 内部リンク全てが200を返す | リンク先を修正 or リンク削除 |
| 2 | **画像表示** | 全imgタグがnaturalWidth > 0 | パス修正 or 代替画像 |
| 3 | **レスポンシブ** | 375px/768px/1280pxで横スクロールなし | CSS修正 |
| 4 | **目次存在** | 全singleページに`.toc`要素あり | レイアウト修正 |
| 5 | **パンくずリスト** | 全ページに`.breadcrumb`あり、リンク有効 | partial修正 |
| 6 | **メタタグ** | title(50-60字), description(80-160字), og:image | front matter修正 |
| 7 | **見出し構造** | h1が1つ、h2-h3が階層的 | コンテンツ修正 |
| 8 | **ページ内コンテンツ量** | 本文500文字以上（indexページ除く） | コンテンツ追加 |
| 9 | **内部リンク数** | 各ページから5つ以上の内部リンク | 関連リンク追加 |
| 10 | **表示速度** | LCP < 2.5秒、レイアウトシフトなし | 画像最適化/CSS修正 |

#### 出力フォーマット

```json
{
  "timestamp": "2026-02-12T12:00:00Z",
  "total_pages": 52,
  "passed": 48,
  "failed": 4,
  "score": 92,
  "failures": [
    {
      "page": "/games/splatoon3/tier-list/",
      "check": "responsive",
      "detail": "横スクロール発生 @375px、要素: .tier-grid (幅: 420px)",
      "fix_suggestion": ".tier-grid { overflow-x: auto; } を追加"
    }
  ]
}
```

---

### 第2段階: Claude API画像評価（`qa_stage2.py`）

**実行タイミング**: テンプレート（CSS/レイアウト）変更時のみ
**所要時間**: 約2分（スクショ取得 + API呼び出し）
**ツール**: Playwright（スクショ撮影）+ Claude API（画像解析）

#### 手順

1. Playwrightでサイトの主要ページのスクリーンショットを撮影
   - トップページ（PC/モバイル）
   - ティアリストページ（PC/モバイル）
   - 武器個別ページ（PC/モバイル）
   - ゲーム一覧ページ（PC/モバイル）
   - → 合計約8枚
2. Game8の同等ページのスクリーンショットも用意（初回のみ手動取得、以降再利用）
3. Claude APIに両方の画像を送り、5項目で比較評価させる

#### 評価項目（5項目・各20点満点）

| # | 評価項目 | 観点 | Game8参考基準 |
|---|---------|------|-------------|
| 1 | **レイアウト構成** | 情報の配置、余白、グリッド | 3カラム構成、カード型UI、セクション区切り明確 |
| 2 | **色使い・コントラスト** | 配色、アクセント、可読性 | ダークテーマ、ティア色分け、CTA色の使い分け |
| 3 | **タイポグラフィ** | フォントサイズ、行間、見出し階層 | 16px本文、24px見出し、太字の使い分け |
| 4 | **インタラクション要素** | ボタン、リンク、ホバー状態 | 角丸ボタン、ホバーエフェクト、アイコン付きリンク |
| 5 | **情報密度・視認性** | コンテンツの詰まり具合、スキャナビリティ | アイコン+テキスト、テーブル活用、色付きバッジ |

#### Claude APIプロンプトテンプレート

```
あなたはゲーム攻略サイトのUI/UXデザイン評価の専門家です。

以下の2つのスクリーンショットを比較して、5項目で評価してください。

【参考サイト（Game8）】: {game8_screenshot}
【評価対象サイト】: {our_screenshot}

各項目を0-20点で採点し、具体的な改善提案を3つ以上挙げてください。

1. レイアウト構成（20点）
2. 色使い・コントラスト（20点）
3. タイポグラフィ（20点）
4. インタラクション要素（20点）
5. 情報密度・視認性（20点）

合計: /100点

改善提案はCSSの具体的な変更を含めてください。
```

#### 出力フォーマット

```json
{
  "timestamp": "2026-02-12T12:00:00Z",
  "pages_evaluated": 4,
  "scores": {
    "layout": 14,
    "color": 16,
    "typography": 12,
    "interaction": 8,
    "density": 13
  },
  "total_score": 63,
  "improvements": [
    {
      "priority": 1,
      "category": "interaction",
      "description": "ティアリストのアイコンにホバーエフェクトがない",
      "css_fix": ".tier-grid .weapon-icon:hover { transform: scale(1.1); box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: all 0.2s; }"
    }
  ]
}
```

---

### 文章チェック（`qa_text.py`）

**実行タイミング**: 毎回（コンテンツ変更時）
**所要時間**: 約30秒
**ツール**: Claude API（テキスト解析）

#### チェック項目

| # | チェック項目 | 判定基準 |
|---|------------|---------|
| 1 | **テンプレ感のなさ** | 同じ文型の繰り返しが3回以上ない |
| 2 | **具体性** | 数値・固有名詞・具体例が含まれている |
| 3 | **情報の正確性** | Game8/GameWithのデータと矛盾しない |
| 4 | **読みやすさ** | 1文が80文字以内、段落が5行以内 |
| 5 | **SEOキーワード** | タイトル・見出しにターゲットKWが含まれる |

#### Claude APIプロンプトテンプレート

```
あなたはゲーム攻略記事の品質チェッカーです。

以下の記事を5項目で評価し、問題箇所を具体的に指摘してください。

【記事タイトル】: {title}
【記事本文】:
{content}

1. テンプレ感（同じ文型の繰り返し、機械的な文章）→ 具体的な修正案を提示
2. 具体性（数値、固有名詞、実例の有無）→ 不足箇所を指摘
3. 情報の正確性（既知のゲームデータとの整合性）
4. 読みやすさ（文長、段落長、構成）
5. SEO（キーワード配置）

各項目をPASS/FAILで判定し、FAILの場合は修正後テキストを提案してください。
```

---

## 4. 自動修正ループ

### 基本フロー

```
Claude Codeが以下を自律的に繰り返す:

1. Hugo build
2. qa_stage1.py 実行 → 機械的チェック
   └─ FAIL → 自動修正して 1 に戻る（最大3回リトライ）
3. qa_text.py 実行 → 文章チェック
   └─ FAIL → 指摘箇所を修正して 1 に戻る（最大3回リトライ）
4. テンプレ変更あり? → YES → qa_stage2.py 実行 → 画像評価
   └─ 60点未満 → CSS/レイアウト修正して 1 に戻る
5. 全PASS → デプロイ可能
```

### 修正ルール

- **第1段階の修正**: 機械的に修正可能（リンク修正、CSS追加、メタタグ追加等）
- **文章の修正**: Claude APIの提案をそのまま適用（ただし情報の正確性は元データと照合）
- **第2段階の修正**: CSS変更が主。Claude APIのCSS提案を適用
- **リトライ上限**: 各段階3回まで。超えたら人間にエスカレーション（レポート出力）

### エスカレーションレポート

自動修正で解決できなかった場合、以下をファイル出力:

```
qa_report_YYYYMMDD_HHMMSS.md
├── 問題のサマリー
├── 試した修正とその結果
├── スクリーンショット（該当箇所）
└── 推奨アクション（人間向け）
```

---

## 5. テンプレートの設計

### game_config_template.json（ゲーム設定テンプレート）

```json
{
  "game_name": "",
  "game_slug": "",
  "description": "",
  "icon_source": {
    "type": "wiki_api | direct_url | manual",
    "api_endpoint": "",
    "file_pattern": ""
  },
  "content_types": {
    "tier_list": true,
    "character_pages": true,
    "beginner_guide": true,
    "events": true,
    "custom_pages": []
  },
  "tier_definition": {
    "tiers": ["SS", "S+", "S", "A+", "A", "B+", "B", "C"],
    "colors": {
      "SS": "#FFD700",
      "S+": "#9B59B6",
      "S": "#E74C3C",
      "A+": "#E67E22",
      "A": "#F1C40F",
      "B+": "#2ECC71",
      "B": "#3498DB",
      "C": "#95A5A6"
    }
  },
  "data_schema": {
    "entity_name": "武器 | キャラクター | etc",
    "fields": ["name", "role", "tier", "rating", "pros", "cons"],
    "custom_fields": {}
  },
  "raw_data_sources": [
    {"name": "Game8", "url": "", "scrape_method": ""},
    {"name": "GameWith", "url": "", "scrape_method": ""}
  ],
  "seo": {
    "target_keywords": [],
    "title_template": "{game_name} {page_type} - Gamers-For"
  }
}
```

### 共通スクリプトの汎用化方針

| スクリプト | 入力 | 出力 | 汎用化のポイント |
|-----------|------|------|----------------|
| `build_master_data.py` | `raw_data/*.md` + `game_config.json` | `master.json` | データスキーマをconfigで定義 |
| `generate_pages.py` | `master.json` + `game_config.json` | `content/games/<slug>/*.md` | ページ種別・テンプレートをconfigで切替 |
| `fetch_icons.py` | `game_config.json` | `static/images/games/<slug>/` | アイコンソースをconfigで指定 |

---

## 6. 新ゲーム追加の標準手順

```
Step 1: 準備
  ├── ０Nゲーム名/ ディレクトリ作成
  ├── game_config.json を template からコピー・編集
  └── raw_data/ に情報源をスクレイピング

Step 2: データ構築
  ├── build_master_data.py ０Nゲーム名/ を実行
  └── → data/<game-slug>_master.json 生成

Step 3: アイコン取得
  ├── fetch_icons.py ０Nゲーム名/ を実行
  └── → static/images/games/<game-slug>/ にアイコン配置

Step 4: コンテンツ生成
  ├── generate_pages.py ０Nゲーム名/ を実行
  └── → content/games/<game-slug>/*.md 生成

Step 5: 品質チェック
  ├── hugo build
  ├── qa_stage1.py → 機械的チェック
  ├── qa_text.py → 文章チェック
  └── qa_stage2.py → 画像評価（初回は必ず実行）

Step 6: 修正ループ
  └── 全チェックPASSまで自動修正を繰り返す

Step 7: デプロイ
  └── git push → GitHub Pages
```

**所要時間目安**: Step 1（手動30分）→ Step 2-6（自動1-2時間）→ Step 7（自動1分）

---

## 7. 横展開計画

### 候補ゲーム（優先順）

| 優先度 | ゲーム | slug | データ源 | 理由 |
|--------|--------|------|---------|------|
| 1 | スプラトゥーン3 | splatoon3 | Game8/GameWith/Inkipedia | **現在作成中** |
| 2 | 原神 | genshin | Game8/GameWith/HoYoLAB | 検索ボリューム最大、キャラ80+ |
| 3 | ブルーアーカイブ | blue-archive | Game8/GameWith | 根強い人気、キャラゲー |
| 4 | モンハンワイルズ | mh-wilds | Game8/Wiki | 2025年新作、初動需要 |
| 5 | スターレイル | star-rail | Game8/HoYoLAB | HoYoverse系2本目でシナジー |
| 6 | ウマ娘 | uma-musume | Game8/GameWith | キャラ大量、育成攻略 |
| 7 | ゼンゼロ | zenless-zone-zero | Game8/GameWith | 比較的新しく競合少 |

### マイルストーン

| 時期 | 目標 | ゲーム数 | ページ数目安 |
|------|------|---------|------------|
| 〜2月末 | スプラ3完成 + テンプレート完成 | 1 | 175+ |
| 〜3月末 | 原神追加 | 2 | 350+ |
| 〜4月末 | 3ゲーム追加 | 5 | 1,000+ |
| 〜6月末 | AdSense申請・承認 | 5-7 | 2,000+ |

---

## 8. 収益化計画

### Phase 1: コンテンツ蓄積期（〜3ヶ月）
- スプラ3サイト完成（品質チェック全PASS）
- 3-5ゲーム追加
- 合計500ページ以上

### Phase 2: 広告申請期（3-6ヶ月）
- Google AdSense申請
- 広告配置: **記事末尾に1つだけ**（ユーザー方針）
- 独自ドメイン取得

### Phase 3: 拡大期（6ヶ月〜）
- ゲームアフィリエイト提携
- 10ゲーム以上に展開
- 月間PV目標: 10万

### コスト構造
| 項目 | コスト |
|------|-------|
| ホスティング | 0円（GitHub Pages） |
| ドメイン | 約1,000円/年 |
| Claude API（品質チェック用） | 従量制（月数百円程度） |
| 人件費 | 0円（全自動） |

---

## 9. 技術メモ

### Hugo
- **Binary**: `/home/encos/bin/hugo`（`export PATH="$HOME/bin:$PATH"` が必要）
- **Version**: v0.139.0 extended
- **日付問題**: システム時計がUTC → `date`はUTCで確実に過去の日付を使う or `--buildFuture`
- **refショートコード**: `{{< ref "page" >}}` は_index.mdから失敗 → 相対パス `page/` を使う

### ショートコード一覧
| ショートコード | 用途 | 引数 |
|--------------|------|------|
| `character-card` | キャラ/武器カード | name, role, rating |
| `tier-grid` | ティアグリッド | tier |
| `tier-table` | ティアテーブル行 | tier |
| `weapon-icon` | 武器アイコン表示 | name, slug |
| `weapon-table` | 武器テーブル | headers |
| `update-info` | 更新日バッジ | date |
| `game-ad` | 広告ブロック | - |

### Inkipedia API（スプラ3アイコン）
- エンドポイント: `splatoonwiki.org/w/api.php`
- メイン武器: `S3 Weapon Main {English Name}.png`
- サブウェポン: `S3 Weapon Sub {English Name} Flat.png`
- スペシャル: `S3 Weapon Special {English Name}.png`
- **必ず英語slugを使う**（日本語ファイル名は壊れる）

### データパイプライン（現状・スプラ3）
```
raw_data/ (5ファイル, 3,166行, 144KB)
    ↓ build_master_data.py
data/splatoon3_master.json (162武器)
    ↓ generate_all_pages.py
content/games/splatoon3/*.md (8ページ, 2,470行)
    ↓ hugo build
public/ (52ページ, 192静的ファイル)
```

---

## 10. これまでのやり取りサマリー

### セッション1: 基盤構築
- Hugoプロジェクト `gamers-for/` をゼロから構築
- Game8風デザイン（ダークネイビー #1a1a2e + 赤アクセント #e74c3c）のCSSを作成
- カスタムレイアウト・ショートコード7種を作成
- スプラトゥーン3の武器アイコン116個をInkipedia APIからダウンロード

### セッション2: データ収集と再構築
- ユーザー指示:「情報量が足りない。Game8等の情報を全部スクレイピングして1ファイルにまとめろ」
- 大規模スクレイピング: 5ファイル、3,166行、144KB
- `build_master_data.py` でマスターJSON生成（162武器）
- `fetch_missing_icons.py` で不足アイコン取得（計191個）
- `generate_all_pages.py` で全8ページ自動生成（2,470行）
- Hugoビルド成功: 52ページ

### セッション3: 自己評価と方針転換
- `evaluate_site.py` で自己評価 → 100点を出すが実態はGame8と程遠い
- **問題発覚**: テキストベースのチェックだけでは見た目の品質が測れない
- ユーザー指示:「自律的に差分検出→修正→確認を繰り返して100点に近づけろ」

### セッション4（現在）: テンプレート化 + 品質チェック方針策定
- ディレクトリ構造の整理（`００テンプレート/`、`０１スプラトゥーン３/`）
- 2段階品質チェックシステムの設計
- 本方針書の作成
- **次のステップ**: スクリプトの汎用化・移動、品質チェックスクリプトの実装
